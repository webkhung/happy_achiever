- title "Schedules"
- if (requirement = requirement_to_schedule).present?
  %h2.text-center Before you can setup your schedule, you need to <span class='orange'>#{requirement.to_sentence}</span> first.
- else
  .row
    .span12
      .page-header
        %h1#week
          Week of #{DateTime.now.beginning_of_week.to_date.strftime('%m/%d')} to  #{DateTime.now.end_of_week.to_date.strftime('%m/%d')}

      .well#time-scheduled
        Time scheduled this week:
        - @plans.each do |p|
          = link_to plan_path(p) do
            = image_tag(p.image_path, class: 'schedule-thumb plan-small')
            = image_tag 'clock.png'
            = time_spent_in_words(p.minutes_scheduled)
        .label.label-important= 'To achieve your goal you MUST spend time on it' if @plans.any? { |p| p.minutes_scheduled.zero? }
  .row
    .span12
      .alert.alert-info When you completed a task, you mark it by clicking on the <span class='btn btn-mini btn-info'>Achieve!</span>
      .weekly-schedule= render partial: 'schedules/day_range', :locals => { start_date: DateTime.now.beginning_of_week.to_date, days: 7, schedules: @schedules, mode: :edit }

  %ol#schedulerTip.joyRideTip
    %li{ data: { id: 'week' } }
      %p This shows the current week.
    %li{ data: { id: 'time-scheduled' } }
      %p Show how much time you scheduled for each goal.
      %p <span class='orange'>If you want to achieve a goal, you MUST spend more time on it.</span>
    %li{ data: { id: 'joyride-schedule-button' } }
      %p Click on this button to add schedule for this day.  You can choose doing the task daily, weekly, or once.

  :javascript
    $(window).load(function() {
      $("#schedulerTip").joyride({
        autoStart: true,
        modal: false,
        cookieMonster: true,
        cookieName: "schedulerTip#{current_user.id}",
        cookieDomain: false,
        postRideCallback : function() {
        }
      })
    });
